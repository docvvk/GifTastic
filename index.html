<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <title>GifTastic</title>
</head>
<body>
    <div class="container">
        <br>
        <!-- Adding buttons for the celebrities -->
        <div class="buttons"></div>
        <br>
        <label for="name">Who's your favorite celeb?</label>
        <!-- Input celeb name here -->
        <input class='celeb-name' type="text">
        <button class="submit">SUBMIT</button>        

        <!-- Empty div for adding gifs -->
        <div class="images"></div>

    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>

    var options = ['Steve Jobs', 'Bruce Lee', 'Leonardo DiCaprio', 'Roger Federer'];

     function displayButtons() {
        $(".buttons").empty();

        for (var i = 0; i < options.length; i++) {
        var btn = $("<button class='celeb'>");
        btn.attr('data-name', options[i]);
        btn.text(options[i]);
        $(".buttons").prepend(btn);
        } 
    }
    

    function getInfo() {

        var query = $(this).attr('data-name');
        var url = 'https://api.giphy.com/v1/gifs/search'
        url += '?' + $.param({
            'q'       : query,
            'api_key' : 'nru2bYnEeyxA6QGklDE7nMQ4je3pIaHg',
            'limit'   : 5,
        })
        console.log(url);

        $.ajax({
            url: url,
            method: 'GET',
        }).done(function(response) {
            var info = response.data;
            for (var i = 0; i < info.length; i ++) {
                var img = $("<img>").attr('src', info[i].images.fixed_width.url);
                var rating = $("<p>").text('Rating: ' + info[i].rating);
                $(".images").prepend(img);
                $(".images").prepend(rating);
                console.log(response);
            }
        }).fail(function(err) {
            throw err;        
        })
    }
   
    $(document).on("click", '.celeb', getInfo);

    $('.submit').on("click", function(event) {
        event.preventDefault();
        var input = $(".celeb-name").val().trim();
        options.push(input);
        displayButtons();
    });
    displayButtons();
        
    console.log(options);
   






</script>
</html>